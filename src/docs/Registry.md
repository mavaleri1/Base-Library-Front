–Ø –∏–∑—É—á—É —Ç–µ–∫—É—â—É—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤ –≤ –ë–î —Å —É—á–µ—Ç–æ–º –±–ª–æ–∫—á–µ–π–Ω–∞. –î–∞–≤–∞–π—Ç–µ –ø–æ—Å–º–æ—Ç—Ä–∏–º –Ω–∞ –∫–ª—é—á–µ–≤—ã–µ —Ñ–∞–π–ª—ã —Å–∏—Å—Ç–µ–º—ã.


[4 tools called]

–¢–µ–ø–µ—Ä—å –¥–∞–≤–∞–π—Ç–µ –ø–æ—Å–º–æ—Ç—Ä–∏–º –Ω–∞ –æ—Å–Ω–æ–≤–Ω—ã–µ API endpoints –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –º–∞—Ç–µ—Ä–∏–∞–ª–∞–º–∏:


[2 tools called]

–¢–µ–ø–µ—Ä—å –¥–∞–≤–∞–π—Ç–µ –ø–æ—Å–º–æ—Ç—Ä–∏–º –Ω–∞ API endpoints –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤:


[2 tools called]

–î–∞–≤–∞–π—Ç–µ –Ω–∞–π–¥–µ–º endpoint –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤:


[2 tools called]

–¢–µ–ø–µ—Ä—å –¥–∞–≤–∞–π—Ç–µ –ø–æ—Å–º–æ—Ç—Ä–∏–º –Ω–∞ learnflow, –≥–¥–µ —Å–æ–∑–¥–∞—é—Ç—Å—è –º–∞—Ç–µ—Ä–∏–∞–ª—ã:


[2 tools called]

–¢–µ–ø–µ—Ä—å –¥–∞–≤–∞–π—Ç–µ –ø–æ—Å–º–æ—Ç—Ä–∏–º –Ω–∞ –ø–æ–ª–Ω—É—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤:


[1 tool called]

–¢–µ–ø–µ—Ä—å —É –º–µ–Ω—è –µ—Å—Ç—å –ø–æ–ª–Ω–∞—è –∫–∞—Ä—Ç–∏–Ω–∞! –ü–æ–∑–≤–æ–ª—å—Ç–µ –º–Ω–µ –æ–±—ä—è—Å–Ω–∏—Ç—å, –∫–∞–∫ —Å–µ–π—á–∞—Å —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –≤ –ë–î —Å —É—á–µ—Ç–æ–º –±–ª–æ–∫—á–µ–π–Ω–∞:

## –¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –≤ –ë–î —Å –±–ª–æ–∫—á–µ–π–Ω-–≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å—é

### üèóÔ∏è **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ö—Ä–∞–Ω–µ–Ω–∏—è**

–°–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **–≥–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥** –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤:

1. **–§–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞** - –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∏ —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è
2. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö PostgreSQL** - –¥–ª—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –∏ –±–ª–æ–∫—á–µ–π–Ω-–≥–æ—Ç–æ–≤—ã—Ö –ø–æ–ª–µ–π
3. **–ë–ª–æ–∫—á–µ–π–Ω-–≥–æ—Ç–æ–≤—ã–µ –ø–æ–ª—è** - –¥–ª—è –±—É–¥—É—â–µ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Web3

### üìä **–ú–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö Material**

```python
class Material(Base):
    # –û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–ª—è
    id: UUID                    # –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä
    author_id: UUID            # –ê–≤—Ç–æ—Ä (–±—É–¥—É—â–∏–π –≤–ª–∞–¥–µ–ª–µ—Ü NFT)
    thread_id: str             # LangGraph thread ID
    session_id: str            # Session ID
    
    # –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è (–¥–ª—è –±–ª–æ–∫—á–µ–π–Ω –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö)
    subject: str               # –ü—Ä–µ–¥–º–µ—Ç (–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞, –§–∏–∑–∏–∫–∞, etc.)
    grade: str                 # –ö–ª–∞—Å—Å/—É—Ä–æ–≤–µ–Ω—å
    topic: str                 # –ö–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è —Ç–µ–º–∞
    
    # –ö–æ–Ω—Ç–µ–Ω—Ç
    content: str               # –ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç (markdown)
    input_query: str           # –ò—Å—Ö–æ–¥–Ω—ã–π –∑–∞–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    
    # –ë–ª–æ–∫—á–µ–π–Ω-–≥–æ—Ç–æ–≤—ã–µ –ø–æ–ª—è
    content_hash: str          # SHA-256 —Ö–µ—à –∫–æ–Ω—Ç–µ–Ω—Ç–∞
    ipfs_cid: str              # IPFS CID (–ø–æ–∫–∞ placeholder)
    
    # –§–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞
    file_path: str             # –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É –Ω–∞ –¥–∏—Å–∫–µ
    
    # –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
    title: str                 # –ó–∞–≥–æ–ª–æ–≤–æ–∫ –º–∞—Ç–µ—Ä–∏–∞–ª–∞
    word_count: int            # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–ª–æ–≤
    status: str                # draft/published/archived
    
    # –í—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏
    created_at: datetime
    updated_at: datetime
```

### üîÑ **–ü—Ä–æ—Ü–µ—Å—Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤**

#### 1. **–°–æ–∑–¥–∞–Ω–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª–∞ –≤ LearnFlow**
```python
# learnflow/services/artifacts_manager.py
async def _save_material_to_db(
    thread_id: str,
    session_id: str, 
    content: str,
    input_query: str,
    file_path: str,
    wallet_address: str
) -> UUID:
```

#### 2. **–ü–æ—à–∞–≥–æ–≤—ã–π –ø—Ä–æ—Ü–µ—Å—Å:**

**–®–∞–≥ 1: –ü–æ–∏—Å–∫/—Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**
- –ò—â–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ `wallet_address`
- –ï—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω - —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤–æ–≥–æ
- –î–ª—è –∞–Ω–æ–Ω–∏–º–Ω—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `0x0000...0000`

**–®–∞–≥ 2: AI-–∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è**
```python
classifier = get_classifier_service()
classification = await classifier.classify_material(
    content=content,
    input_query=input_query
)
# –†–µ–∑—É–ª—å—Ç–∞—Ç: subject, grade, topic
```

**–®–∞–≥ 3: –ë–ª–æ–∫—á–µ–π–Ω-–º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ**
```python
content_hash = calculate_content_hash(content)  # SHA-256
ipfs_cid_placeholder = prepare_ipfs_cid_placeholder(content_hash, material_id)
```

**–®–∞–≥ 4: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î**
```python
material = Material(
    id=material_id,
    author_id=author.id,
    thread_id=thread_id,
    session_id=session_id,
    subject=classification.subject,
    grade=classification.grade, 
    topic=classification.topic,
    content=content,
    content_hash=content_hash,
    ipfs_cid=ipfs_cid_placeholder,
    file_path=file_path,
    status="published"
)
```

### üîó **–ë–ª–æ–∫—á–µ–π–Ω-–≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å**

#### **–¢–µ–∫—É—â–∏–µ –±–ª–æ–∫—á–µ–π–Ω-–ø–æ–ª—è:**
- `content_hash` - SHA-256 —Ö–µ—à –¥–ª—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏
- `ipfs_cid` - –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω –¥–ª—è IPFS/Arweave
- `author_id` - –ø—Ä–∏–≤—è–∑–∞–Ω –∫ wallet_address (–±—É–¥—É—â–∏–π NFT owner)

#### **–ë—É–¥—É—â–∞—è –±–ª–æ–∫—á–µ–π–Ω-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:**
```python
# –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è:
- NFT minting –¥–ª—è –∞–≤—Ç–æ—Ä–∞ (–ø—Ä–∞–≤–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)
- –•—Ä–∞–Ω–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –≤ –±–ª–æ–∫—á–µ–π–Ω–µ: subject, grade, topic, hash, CID, owner
- –ö–æ–Ω—Ç–µ–Ω—Ç –≤ IPFS/Arweave (–¥–µ—Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ)
- –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –ë–î –∏ localhost –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏
```

### üìÅ **–§–∞–π–ª–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞**

```
data/artifacts/
‚îî‚îÄ‚îÄ {thread_id}/
    ‚îú‚îÄ‚îÄ metadata.json
    ‚îî‚îÄ‚îÄ sessions/
        ‚îî‚îÄ‚îÄ {session_id}/
            ‚îú‚îÄ‚îÄ session_metadata.json
            ‚îú‚îÄ‚îÄ generated_material.md    # –û—Å–Ω–æ–≤–Ω–æ–π –º–∞—Ç–µ—Ä–∏–∞–ª
            ‚îú‚îÄ‚îÄ synthesized_material.md  # –°–∏–Ω—Ç–µ–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π
            ‚îú‚îÄ‚îÄ questions.md            # –í–æ–ø—Ä–æ—Å—ã
            ‚îî‚îÄ‚îÄ answers/                # –û—Ç–≤–µ—Ç—ã
```

### üîê **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –ø—Ä–∞–≤–∞**

- **Web3 –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è** —á–µ—Ä–µ–∑ JWT —Ç–æ–∫–µ–Ω—ã
- **–ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞** —á–µ—Ä–µ–∑ `wallet_address`
- **–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–ª–∞–¥–µ–Ω–∏—è** –º–∞—Ç–µ—Ä–∏–∞–ª–∞–º–∏
- **–°—Ç–∞—Ç—É—Å—ã –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤**: draft, published, archived

### üéØ **–ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**

1. **–î–≤–æ–π–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ**: –ë–î + —Ñ–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞
2. **AI-–∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ subject/grade/topic
3. **–ë–ª–æ–∫—á–µ–π–Ω-–≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å**: —Ö–µ—à–∏, IPFS CID, –ø—Ä–∏–≤—è–∑–∫–∞ –∫ wallet
4. **–í–µ—Ä—Å–∏–æ–Ω–Ω–æ—Å—Ç—å**: —á–µ—Ä–µ–∑ content_hash
5. **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**: –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–æ –¥–ª—è –¥–µ—Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è

–≠—Ç–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç **—Å–µ–π—á–∞—Å** —Ä–∞–±–æ—Ç–∞—Ç—å —Å –º–∞—Ç–µ—Ä–∏–∞–ª–∞–º–∏ –≤ —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω–æ–º —Ä–µ–∂–∏–º–µ, –Ω–æ **–≥–æ—Ç–æ–≤–∏—Ç –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É** –¥–ª—è –ø–æ–ª–Ω–æ–π –±–ª–æ–∫—á–µ–π–Ω-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –≤ –±—É–¥—É—â–µ–º.